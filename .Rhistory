table_data_html <- html_nodes(webpage,".table-condensed td")
results <- html_text(table_data_html)
headers<- html_nodes(webpage,".table-condensed th")
header_names <- html_text(headers)
head(header_names,13)
## Creating Data Frame
results2 <- results
length(results2) <- 13 * ceiling(length(results) / 13)
mat <- matrix(results2,, 13, byrow = TRUE)
df <- as.data.frame(mat, stringsAsFactors = FALSE)
colnames(df) <- header_names
dfs[[i]] <- df
}
library(rvest)
library(dplyr)
#scraping Results
years <- c("2018","2017","2016","2015","2014","2013")
years[3]
dfs <- vector("list",1)
for (i in 1:length(years)){
url1 <- c("2018","2017","2016")
url2 <- c("2015","2014","2013")
if (year[i] %in% url1){
url <-paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa/event/Standard")
} else {
url <- paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa")
}
webpage <- read_html(url)
table_data_html <- html_nodes(webpage,".table-condensed td")
results <- html_text(table_data_html)
headers<- html_nodes(webpage,".table-condensed th")
header_names <- html_text(headers)
head(header_names,13)
## Creating Data Frame
results2 <- results
length(results2) <- 13 * ceiling(length(results) / 13)
mat <- matrix(results2,, 13, byrow = TRUE)
df <- as.data.frame(mat, stringsAsFactors = FALSE)
colnames(df) <- header_names
dfs[[i]] <- df
}
tail(dfs[[3]])
tail(dfs[[4]])
unlist(dfs)
test <- unlist(dfs)
years <- c("2018","2017","2016","2015","2014","2013")
years[3]
dfs <- vector("list",1)
for (i in 1:length(years)){
url1 <- c("2018","2017","2016")
url2 <- c("2015","2014","2013")
if (year[i] %in% url1){
url <-paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa/event/Standard")
} else {
url <- paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa")
}
webpage <- read_html(url)
table_data_html <- html_nodes(webpage,".table-condensed td")
results <- html_text(table_data_html)
headers<- html_nodes(webpage,".table-condensed th")
header_names <- html_text(headers)
head(header_names,13)
## Creating Data Frame
results2 <- results
length(results2) <- 13 * ceiling(length(results) / 13)
mat <- matrix(results2,, 13, byrow = TRUE)
df <- as.data.frame(mat, stringsAsFactors = FALSE)
colnames(df) <- header_names
dfs[[i]] <- df
}
library(rvest)
library(dplyr)
#scraping Results
years <- c("2018","2017","2016","2015","2014","2013")
years[3]
dfs <- vector("list",1)
for (i in 1:length(years)){
url1 <- c("2018","2017","2016")
url2 <- c("2015","2014","2013")
if (year[i] %in% url1){
url <-paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa/event/Standard")
} else {
url <- paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa")
}
webpage <- read_html(url)
table_data_html <- html_nodes(webpage,".table-condensed td")
results <- html_text(table_data_html)
headers<- html_nodes(webpage,".table-condensed th")
header_names <- html_text(headers)
head(header_names,13)
## Creating Data Frame
results2 <- results
length(results2) <- 13 * ceiling(length(results) / 13)
mat <- matrix(results2,, 13, byrow = TRUE)
df <- as.data.frame(mat, stringsAsFactors = FALSE)
colnames(df) <- header_names
dfs[[i]] <- df
}
library(rvest)
library(dplyr)
#scraping Results
years <- c("2018","2017","2016","2015","2014","2013")
years[3]
dfs <- vector("list",1)
for (i in 1:length(years)){
url1 <- c("2018","2017","2016")
url2 <- c("2015","2014","2013")
if (years[i] %in% url1){
url <-paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa/event/Standard")
} else {
url <- paste0("https://www.startlinetiming.com/en/races/",years[i],"/wasa")
}
webpage <- read_html(url)
table_data_html <- html_nodes(webpage,".table-condensed td")
results <- html_text(table_data_html)
headers<- html_nodes(webpage,".table-condensed th")
header_names <- html_text(headers)
head(header_names,13)
## Creating Data Frame
results2 <- results
length(results2) <- 13 * ceiling(length(results) / 13)
mat <- matrix(results2,, 13, byrow = TRUE)
df <- as.data.frame(mat, stringsAsFactors = FALSE)
colnames(df) <- header_names
dfs[[i]] <- df
}
head(dfs[[1]])
str(dfs[[1]])
wasaData18 <- read_excel("wasaData.xlsx", sheet = "2018")
str(wasaDa18)
str(wasaData18)
library(lubridate)
mutate_at(c(10,12),ms)
mutate_at(c(10,12),ms)
w18 <- tbl_df(dfs[[1]])
mutate_at(c(10,12),ms)
str(w18)
wasa2018 <- w18%>%
mutate(Swim=str_replate(Swim,"\n",""))
wasa2018 <- w18%>%
mutate(Swim=str_replace(Swim,"\n",""))
mutate_at(c(3,9,11,13),hms
wasa2018 <- w18%>%
mutate(Swim=str_replace(Swim,"\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)
wasa2018 <- w18%>%
mutate(Swim=str_replace(Swim,"\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)
str(wasa2018)
View(wasa2018)
wasa2018 <- w18%>%
mutate(Swim=str_replace(Swim,"\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
fill(9:13)
str(wasa2018)
View(wasa2018)
wasa2018 <- w18%>%
mutate(Swim=str_replace(Swim,"\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(3,9:13),as.numeric)%>%
fill(9:13)
View(wasa2018)
wasa2018 <- w18%>%
mutate(Swim=str_replace(Swim,"\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)
hist(wasa2018$Time)
View(wasa2018)
cleandata <- function(x,y) {
x %>%
filter(!is.na(Time))
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))%>%
filter(!is.na(Time))
}
cleandata(w18)
str(w18)
cleandata <- function(x,y) {
x %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))%>%
filter(!is.na(Time))
}
cleandata(w18)
cleandata(w18)
#cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))
View(test)
str(test)
cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace_(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))%>%
filter(!is.na(Time))
}
cleandata(w18)
cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))%>%
filter(!is.na(Time))
}
cleandata(w18)
cleandata <- function(x,y) {
test <- w18 %>%
filter(!is.na(Time))%>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))
}
cleandata(w18)
cleandata(w18,2018)
cleandata <- function(x,y) {
test <- w18 %>%
filter(!is.na(Time))%>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(9:13,as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))
}
cleandata(w18,2018)
str(w18)
cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(1,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))
filter(!is.na(Time))
}
cleandata(w18,2018)
cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(1,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))
}
cleandata(w18,2018)
cleandata <- function(x,y) {
x %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(1,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))
}
cleandata(w18,2018)
#cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(1,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))#%>%
View(test)
View(w18)
#cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(3,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))#%>%
View(test)
#cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(3,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))#%>%
#cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(3,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))#%>%
#cleandata <- function(x,y) {
test <- w18 %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(3,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))
View(test)
#}
str(test)
cleandata <- function(x,y) {
x %>%
mutate(Swim=str_replace(Swim,"\n",""),Division=str_replace_all(Division,"\n\n",""))%>%
mutate_at(c(3,9,11,13),hms)%>%
mutate_at(c(10,12),ms)%>%
mutate_at(c(3,9:13),as.numeric)%>%
fill(9:13)%>%
rename(category ="Division",age_group = "Place/Division",genderP ="Place/Gender")%>%
separate(age_group,into = c("AgePosition","ToalAge"), sep = "/")%>%
separate(genderP,into = c("GenderPosition","ToaGender"), sep = "/")%>%
separate(Place,into = c("Position","TotalP"), sep = "/")%>%
select(-c("Event","Race #","ToalAge","ToaGender","TotalP"))%>%
mutate_at(c(5:6,1),as.numeric)%>%
filter(str_detect(category,"(^F|^M)(?=\\d)"))%>%
mutate(category=as.factor(category),gender = ifelse(str_detect(category,"F"),"F","M"))%>%
mutate(gender = as.factor(gender),year = as.factor(y),category = str_replace(category,"[A-Z]",""))%>%
mutate(category = str_replace(category,"OLY",""))%>%
mutate(category = str_replace(category,"70\\+","7074"))
}
cleandata(w18,2018)
test <- cleandata(w18,2018)
library(ggplot2)
ggplot(test, aes(x=AgePosition, y = Time))+
geom_point()
test1 <-test %>%
filter(category = "3034",gender="M")
ggplot(test1, aes(x=AgePosition, y = Time,color=year))+
geom_point()
test1 <-test %>%
filter(category = "3034",gender="M")
test1 <-test %>%
filter(category =="3034",gender=="M")
ggplot(test1, aes(x=AgePosition, y = Time,color=year))+
geom_point()
ggplot(test1, aes(x=AgePosition, y = seconds_to_period(Time),color=year))+
geom_point()
ggplot(test1, aes(x=AgePosition, y = parse_date_time(seconds_to_period(Time),"HMS"),color=year))+
geom_point()
test1 <-test %>%
filter(category =="3034",gender=="M")%>%
mutate(Time = parse_data_time(seconds_to_period(Time)))
test1 <-test %>%
filter(category =="3034",gender=="M")%>%
mutate(Time = parse_data_time(seconds_to_period(Time),"HMS"))
test1 <-test %>%
filter(category =="3034",gender=="M")%>%
mutate(Time = parse_date_time(seconds_to_period(Time),"HMS"))
ggplot(test1, aes(x=AgePosition, y = Time,color=year))+
geom_point()
